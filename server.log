
> llm-marketplace-service@1.0.0 dev
> ts-node-dev --respawn --transpile-only src/index.ts

[INFO] 22:25:26 ts-node-dev ver. 2.0.0 (using ts-node ver. 10.9.2, typescript ver. 5.8.3)
Connected to PostgreSQL database
Server is running on port 3001
ğŸ¤– Extracting metadata for buyer preference: Looking for space to rent for office use in Kathmandu area under 120000 NPR per month
âœ… Extracted metadata: {
  keywords: [ 'office', 'space', 'rent', 'Kathmandu', '120000 NPR' ],
  listing_type: 'service',
  category: 'RealEstate',
  subcategory: 'ForRent',
  subsubcategory: undefined,
  min_price: 120000,
  max_price: undefined,
  currency: 'NPR',
  features: [ 'office space' ]
}
Cleaning product title...
Title validation results: {
  title: { needsCleaning: false, issues: [], severity: 'low' },
  description: 'Preserved as-is (no cleaning)',
  recommendation: {
    shouldUseLLM: false,
    reason: 'Title looks clean',
    autoFixAvailable: false
  }
}
Title is clean, no changes needed. Description preserved as-is.
Content cleaning result: { method: 'none', changes: [], cost_saved: true }
Generating enriched tags for product...
Generated enriched tags: [
  'office space',
  'rent',
  'cafe office',
  'bank office',
  'location',
  'parking',
  '1700 square feet',
  '1 lakh per month',
  'lainchaur',
  'water facility',
  'call 9811611199'
]
ğŸ¯ Checking for buyer preference matches...
ğŸš€ Processing matches for new product: Office Space for Rent
ğŸ” Checking 2 active buyer preferences for product: Office Space for Rent
ğŸ“Š Preference "Looking for space to rent for office use in Kathmandu area under 120000 NPR per month" scored 75/100
   Reasons: âœ“ Listing type match: service; âœ“ Category match: RealEstate; âœ“ Subcategory match: ForRent; âœ“ Keyword matches (3/5): office, space, rent; â—‹ No location preference specified
âœ… MATCH FOUND! Score: 75/100
ğŸ“Š Preference "House or Apartment flat for rent in Basundhara under $1000 per month" scored 65/100
   Reasons: âœ“ Listing type match: service; âœ“ Category match: RealEstate; âœ“ Subcategory match: ForRent; âœ— Price too high: 100000 > 1000.00 USD; âœ“ Keyword matches (1/5): rent; â—‹ No location preference specified
âœ… MATCH FOUND! Score: 65/100
ğŸ¯ Found 2 matching preferences with score >= 60
ğŸ‰ Processing 2 matches...

ğŸ“§ MATCH NOTIFICATION
To: seller@test.com (Test Seller)
Subject: Found a match for your preference!

Hi Test Seller,

Great news! We found a product that matches your preference:

Your Preference: "Looking for space to rent for office use in Kathmandu area under 120000 NPR per month"
Match Score: 75/100

Matching Product:
- Title: Office Space for Rent
- Price: 100000.00 NPR
- Location: Lainchaur, Kathmandu
- Description: Space on rent lainchaur ma 1700 square feet vako cafe office bank ko lagi huni ramro location ma xa paani parking ko ramro bewasta vako rent 1lakh per month chainile call garnu hola 9811611199

Why it matches:
â€¢ âœ“ Listing type match: service
â€¢ âœ“ Category match: RealEstate
â€¢ âœ“ Subcategory match: ForRent
â€¢ âœ“ Keyword matches (3/5): office, space, rent
â€¢ â—‹ No location preference specified

View full details: [Product Link]
Contact seller: [Seller Contact]

Happy shopping!
LLM Marketplace Team
    

ğŸ“§ MATCH NOTIFICATION
To: seller@test.com (Test Seller)
Subject: Found a match for your preference!

Hi Test Seller,

Great news! We found a product that matches your preference:

Your Preference: "House or Apartment flat for rent in Basundhara under $1000 per month"
Match Score: 65/100

Matching Product:
- Title: Office Space for Rent
- Price: 100000.00 NPR
- Location: Lainchaur, Kathmandu
- Description: Space on rent lainchaur ma 1700 square feet vako cafe office bank ko lagi huni ramro location ma xa paani parking ko ramro bewasta vako rent 1lakh per month chainile call garnu hola 9811611199

Why it matches:
â€¢ âœ“ Listing type match: service
â€¢ âœ“ Category match: RealEstate
â€¢ âœ“ Subcategory match: ForRent
â€¢ âœ— Price too high: 100000 > 1000.00 USD
â€¢ âœ“ Keyword matches (1/5): rent
â€¢ â—‹ No location preference specified

View full details: [Product Link]
Contact seller: [Seller Contact]

Happy shopping!
LLM Marketplace Team
    
ğŸ¤– Extracting metadata for buyer preference: Looking for iPhone 15 under 150000 NPR in good condition
âœ… Extracted metadata: {
  keywords: [ 'iPhone', 'iPhone 15', 'Apple', 'smartphone' ],
  listing_type: 'product',
  category: 'Electronics',
  subcategory: 'CellPhone & Accessories',
  subsubcategory: 'Cell Phone',
  min_price: undefined,
  max_price: 150000,
  currency: 'NPR',
  features: [ 'iPhone 15' ]
}
Cleaning product title...
Title validation results: {
  title: { needsCleaning: false, issues: [], severity: 'low' },
  description: 'Preserved as-is (no cleaning)',
  recommendation: {
    shouldUseLLM: false,
    reason: 'Title looks clean',
    autoFixAvailable: false
  }
}
Title is clean, no changes needed. Description preserved as-is.
Content cleaning result: { method: 'none', changes: [], cost_saved: true }
Generating enriched tags for product...
Generated enriched tags: [
  'iphone',
  'iphone 15 pro',
  '128gb',
  'brand new',
  'excellent condition',
  'original box',
  'photography',
  'gaming',
  'smartphone'
]
ğŸ¯ Checking for buyer preference matches...
ğŸš€ Processing matches for new product: iPhone 15 Pro 128GB
ğŸ” Checking 3 active buyer preferences for product: iPhone 15 Pro 128GB
ğŸ“Š Preference "Looking for iPhone 15 under 150000 NPR in good condition" scored 100/100
   Reasons: âœ“ Listing type match: product; âœ“ Category match: Electronics; âœ“ Subcategory match: CellPhone & Accessories; âœ“ Sub-subcategory match: Cell Phone; âœ“ Price within budget: 140000 <= 150000.00 NPR; âœ“ Keyword matches (3/4): iPhone, iPhone 15, smartphone; â—‹ No location preference specified
âœ… MATCH FOUND! Score: 100/100
ğŸ“Š Preference "Looking for space to rent for office use in Kathmandu area under 120000 NPR per month" scored 0/100
   Reasons: Listing type mismatch: preference wants service, product is product
ğŸ“Š Preference "House or Apartment flat for rent in Basundhara under $1000 per month" scored 0/100
   Reasons: Listing type mismatch: preference wants service, product is product
ğŸ¯ Found 1 matching preferences with score >= 60
ğŸ‰ Processing 1 matches...

ğŸ“§ MATCH NOTIFICATION
To: seller@test.com (Test Seller)
Subject: Found a match for your preference!

Hi Test Seller,

Great news! We found a product that matches your preference:

Your Preference: "Looking for iPhone 15 under 150000 NPR in good condition"
Match Score: 100/100

Matching Product:
- Title: iPhone 15 Pro 128GB
- Price: 140000.00 NPR
- Location: Thamel, Kathmandu
- Description: Brand new iPhone 15 Pro with 128GB storage. Excellent condition, original box included. Perfect for photography and gaming. ğŸ“±âœ¨

Why it matches:
â€¢ âœ“ Listing type match: product
â€¢ âœ“ Category match: Electronics
â€¢ âœ“ Subcategory match: CellPhone & Accessories
â€¢ âœ“ Sub-subcategory match: Cell Phone
â€¢ âœ“ Price within budget: 140000 <= 150000.00 NPR
â€¢ âœ“ Keyword matches (3/4): iPhone, iPhone 15, smartphone
â€¢ â—‹ No location preference specified

View full details: [Product Link]
Contact seller: [Seller Contact]

Happy shopping!
LLM Marketplace Team
    
Cleaning product title...
Title validation results: {
  title: { needsCleaning: false, issues: [], severity: 'low' },
  description: 'Preserved as-is (no cleaning)',
  recommendation: {
    shouldUseLLM: false,
    reason: 'Title looks clean',
    autoFixAvailable: false
  }
}
Title is clean, no changes needed. Description preserved as-is.
Content cleaning result: { method: 'none', changes: [], cost_saved: true }
Generating enriched tags for product...
Generated enriched tags: [
  'rental property',
  'flat for rent',
  '2bhk',
  'parking garage',
  'dhapasi'
]
ğŸ¯ Checking for buyer preference matches...
ğŸš€ Processing matches for new product: Available for Rent
ğŸ” Checking 3 active buyer preferences for product: Available for Rent
ğŸ“Š Preference "Looking for iPhone 15 under 150000 NPR in good condition" scored 45/100
   Reasons: âœ“ Listing type match: product; âœ“ Price within budget: 500 <= 150000.00 NPR; â—‹ No direct keyword matches found; â—‹ No location preference specified
ğŸ“Š Preference "Looking for space to rent for office use in Kathmandu area under 120000 NPR per month" scored 0/100
   Reasons: Listing type mismatch: preference wants service, product is product
ğŸ“Š Preference "House or Apartment flat for rent in Basundhara under $1000 per month" scored 0/100
   Reasons: Listing type mismatch: preference wants service, product is product
ğŸ¯ Found 0 matching preferences with score >= 60
ğŸ˜” No matches found for product: Available for Rent
Cleaning product title...
Title validation results: {
  title: { needsCleaning: false, issues: [], severity: 'low' },
  description: 'Preserved as-is (no cleaning)',
  recommendation: {
    shouldUseLLM: false,
    reason: 'Title looks clean',
    autoFixAvailable: false
  }
}
Title is clean, no changes needed. Description preserved as-is.
Content cleaning result: { method: 'none', changes: [], cost_saved: true }
Generating enriched tags for product...
Generated enriched tags: [
  'rental property',
  'flat for rent',
  '2bhk',
  'parking garage',
  'dhapasi'
]
ğŸ¯ Checking for buyer preference matches...
ğŸš€ Processing matches for new product: Available for Rent
ğŸ” Checking 3 active buyer preferences for product: Available for Rent
ğŸ“Š Preference "Looking for iPhone 15 under 150000 NPR in good condition" scored 45/100
   Reasons: âœ“ Listing type match: product; âœ“ Price within budget: 500 <= 150000.00 NPR; â—‹ No direct keyword matches found; â—‹ No location preference specified
ğŸ“Š Preference "Looking for space to rent for office use in Kathmandu area under 120000 NPR per month" scored 0/100
   Reasons: Listing type mismatch: preference wants service, product is product
ğŸ“Š Preference "House or Apartment flat for rent in Basundhara under $1000 per month" scored 0/100
   Reasons: Listing type mismatch: preference wants service, product is product
ğŸ¯ Found 0 matching preferences with score >= 60
ğŸ˜” No matches found for product: Available for Rent
[INFO] 22:32:39 Restarting: /Volumes/work/learn/code/llm-marketplace-service/src/services/buyerMatchingService.ts has been modified
Connected to PostgreSQL database
Server is running on port 3001
[INFO] 22:32:53 Restarting: /Volumes/work/learn/code/llm-marketplace-service/src/services/buyerMatchingService.ts has been modified
Connected to PostgreSQL database
Server is running on port 3001
SyntaxError: Bad escaped character in JSON at position 187
    at JSON.parse (<anonymous>)
    at parse (/Volumes/work/learn/code/llm-marketplace-service/node_modules/body-parser/lib/types/json.js:92:19)
    at /Volumes/work/learn/code/llm-marketplace-service/node_modules/body-parser/lib/read.js:128:18
    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)
    at invokeCallback (/Volumes/work/learn/code/llm-marketplace-service/node_modules/raw-body/index.js:238:16)
    at done (/Volumes/work/learn/code/llm-marketplace-service/node_modules/raw-body/index.js:227:7)
    at IncomingMessage.onEnd (/Volumes/work/learn/code/llm-marketplace-service/node_modules/raw-body/index.js:287:7)
    at IncomingMessage.emit (node:events:518:28)
    at endReadableNT (node:internal/streams/readable:1696:12)
    at processTicksAndRejections (node:internal/process/task_queues:82:21)
SyntaxError: Bad escaped character in JSON at position 187
    at JSON.parse (<anonymous>)
    at parse (/Volumes/work/learn/code/llm-marketplace-service/node_modules/body-parser/lib/types/json.js:92:19)
    at /Volumes/work/learn/code/llm-marketplace-service/node_modules/body-parser/lib/read.js:128:18
    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)
    at invokeCallback (/Volumes/work/learn/code/llm-marketplace-service/node_modules/raw-body/index.js:238:16)
    at done (/Volumes/work/learn/code/llm-marketplace-service/node_modules/raw-body/index.js:227:7)
    at IncomingMessage.onEnd (/Volumes/work/learn/code/llm-marketplace-service/node_modules/raw-body/index.js:287:7)
    at IncomingMessage.emit (node:events:518:28)
    at endReadableNT (node:internal/streams/readable:1696:12)
    at processTicksAndRejections (node:internal/process/task_queues:82:21)
Cleaning product title...
Title validation results: {
  title: { needsCleaning: false, issues: [], severity: 'low' },
  description: 'Preserved as-is (no cleaning)',
  recommendation: {
    shouldUseLLM: false,
    reason: 'Title looks clean',
    autoFixAvailable: false
  }
}
Title is clean, no changes needed. Description preserved as-is.
Content cleaning result: { method: 'none', changes: [], cost_saved: true }
Generating enriched tags for product...
Generated enriched tags: [ 'iphone 14', 'iphone', 'apple' ]
ğŸ¯ Checking for buyer preference matches...
ğŸš€ Processing matches for new product: iPhone 14
ğŸ” Checking 3 active buyer preferences for product: iPhone 14
ğŸ“Š Preference "Looking for iPhone 15 under 150000 NPR in good condition" scored 98.75/100
   Reasons: âœ“ Listing type match: product; âœ“ Category match: Electronics; âœ“ Subcategory match: CellPhone & Accessories; âœ“ Price within budget: 140000 <= 150000.00 NPR; âœ“ Keyword matches (3/4): iPhone, iPhone 15, Apple; â—‹ No location preference specified
âœ… MATCH FOUND! Score: 98.75/100
ğŸ“Š Preference "Looking for space to rent for office use in Kathmandu area under 120000 NPR per month" scored 0/100
   Reasons: Listing type mismatch: preference wants service, product is product
ğŸ“Š Preference "House or Apartment flat for rent in Basundhara under $1000 per month" scored 0/100
   Reasons: Listing type mismatch: preference wants service, product is product
ğŸ¯ Found 1 matching preferences with score >= 60
ğŸ‰ Processing 1 matches...

ğŸ“§ MATCH NOTIFICATION
To: seller@test.com (Test Seller)
Subject: Found a match for your preference!

Hi Test Seller,

Great news! We found a product that matches your preference:

Your Preference: "Looking for iPhone 15 under 150000 NPR in good condition"
Match Score: 98.75/100

Matching Product:
- Title: iPhone 14
- Price: 140000.00 NPR
- Location: Kathmandu
- Description: Good iPhone

Why it matches:
â€¢ âœ“ Listing type match: product
â€¢ âœ“ Category match: Electronics
â€¢ âœ“ Subcategory match: CellPhone & Accessories
â€¢ âœ“ Price within budget: 140000 <= 150000.00 NPR
â€¢ âœ“ Keyword matches (3/4): iPhone, iPhone 15, Apple
â€¢ â—‹ No location preference specified

View full details: [Product Link]
Contact seller: [Seller Contact]

Happy shopping!
LLM Marketplace Team
    
Cleaning product title...
Title validation results: {
  title: { needsCleaning: false, issues: [], severity: 'low' },
  description: 'Preserved as-is (no cleaning)',
  recommendation: {
    shouldUseLLM: false,
    reason: 'Title looks clean',
    autoFixAvailable: false
  }
}
Title is clean, no changes needed. Description preserved as-is.
Content cleaning result: { method: 'none', changes: [], cost_saved: true }
Generating enriched tags for product...
Generated enriched tags: [ 'rental property', '2bhk', 'parking garage', 'dhapasi' ]
ğŸ¯ Checking for buyer preference matches...
ğŸš€ Processing matches for new product: Available for Rent
ğŸ” Checking 3 active buyer preferences for product: Available for Rent
ğŸ“Š Preference "Looking for iPhone 15 under 150000 NPR in good condition" scored 45/100
   Reasons: âœ“ Listing type match: product; âœ“ Price within budget: 500 <= 150000.00 NPR; â—‹ No direct keyword matches found; â—‹ No location preference specified
ğŸ“Š Preference "Looking for space to rent for office use in Kathmandu area under 120000 NPR per month" scored 0/100
   Reasons: Listing type mismatch: preference wants service, product is product
ğŸ“Š Preference "House or Apartment flat for rent in Basundhara under $1000 per month" scored 0/100
   Reasons: Listing type mismatch: preference wants service, product is product
ğŸ¯ Found 0 matching preferences with score >= 60
ğŸ˜” No matches found for product: Available for Rent
[INFO] 22:48:14 Restarting: /Volumes/work/learn/code/llm-marketplace-service/src/services/llmService.ts has been modified
Connected to PostgreSQL database
Server is running on port 3001
ğŸ¤– Extracting metadata for buyer preference: Apartment flat for rent in Basundhara under $1000 per month
âœ… Extracted metadata: {
  keywords: [ 'apartment', 'flat', 'rent', 'Basundhara' ],
  listing_type: 'product',
  category: 'RealEstate',
  subcategory: 'ForRent',
  subsubcategory: 'Apartment',
  min_price: undefined,
  max_price: 1000,
  currency: 'USD',
  features: []
}
